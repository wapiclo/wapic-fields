{"version":3,"file":"repeater.min.js","sources":["repeater.js"],"sourcesContent":["(function($){\n  'use strict';\n\n  function getRowCount($wrap){\n    return $wrap.find('.wcf-repeater-row:not(.wcf-repeater-template)').length;\n  }\n\n  function replaceIndexAttrs($el, idx){\n    $el.find('[name]').each(function(){\n      var name = $(this).attr('name');\n      if (!name) return;\n      $(this).attr('name', name.replace('[__INDEX__]', '[' + idx + ']'));\n    });\n    $el.find('[id]').each(function(){\n      var id = $(this).attr('id');\n      if (id) $(this).attr('id', id.replace('__INDEX__', String(idx)));\n    });\n    $el.find('[aria-controls]').each(function(){\n      var ac = $(this).attr('aria-controls');\n      if (ac) $(this).attr('aria-controls', ac.replace('__INDEX__', String(idx)));\n    });\n    $el.find('[for]').each(function(){\n      var fr = $(this).attr('for');\n      if (fr) $(this).attr('for', fr.replace('__INDEX__', String(idx)));\n    });\n  }\n\n  function updateRowTitle($row, titleField){\n    if (!titleField) return;\n    var $input = $row.find('.wcf-repeater-field[data-subfield-id=\"'+titleField+'\"]').find('input, select, textarea').first();\n    var val = ($input.val() || '').toString().trim();\n    $row.find('.wcf-repeater-row-title').text(val !== '' ? val : 'Item');\n  }\n\n  function setOpen($row, open){\n    var $btn = $row.find('> .wcf-repeater-row-header .wcf-repeater-accordion-toggle');\n    var $body = $row.find('> .wcf-repeater-row-body');\n    if(open){\n      $btn.attr('aria-expanded','true');\n      $body.stop(true, true).slideDown(150);\n      $btn.text('▲');\n      $row.addClass('is-active');\n    } else {\n      $btn.attr('aria-expanded','false');\n      $body.stop(true, true).slideUp(150);\n      $btn.text('▼');\n      $row.removeClass('is-active');\n    }\n  }\n\n  function bindRowEvents($wrap, $row, titleField){\n    if (titleField) {\n      $row.on('input change', '.wcf-repeater-field[data-subfield-id=\"'+titleField+'\"] input, .wcf-repeater-field[data-subfield-id=\"'+titleField+'\"] select, .wcf-repeater-field[data-subfield-id=\"'+titleField+'\"] textarea', function(){\n        updateRowTitle($row, titleField);\n      });\n      updateRowTitle($row, titleField);\n    }\n    $row.on('click', '.wcf-repeater-accordion-toggle', function(e){\n      e.preventDefault();\n      var $btn = $(this);\n      var expanded = $btn.attr('aria-expanded') === 'true';\n      setOpen($row, !expanded);\n    });\n    // Header click no longer toggles; arrow button only\n    $row.on('click', '.wcf-repeater-remove', function(e){\n      e.preventDefault();\n      $row.remove();\n    });\n\n    // Initialize field plugins for this row\n    initRowPlugins($row);\n\n    // Apply required markers from wrapper to inputs (for new rows cloned from template)\n    $row.find('.wcf-repeater-field[data-wcf-required=\"1\"]').each(function(){\n      $(this).find('input, select, textarea').each(function(){\n        $(this).attr('data-required','true');\n        if (!$(this).hasClass('wcf-required')) $(this).addClass('wcf-required');\n      });\n    });\n\n    // Keep row error class in sync\n    function updateRowError(){\n      if ($row.find('.wcf-field.has-field-error, .wcf-field-error:visible').length){\n        $row.addClass('has-error');\n      } else {\n        $row.removeClass('has-error');\n      }\n    }\n    // Initial check and on changes\n    updateRowError();\n    $row.on('input change blur', 'input, select, textarea', function(){\n      // small delay to let validation handlers run\n      setTimeout(updateRowError, 0);\n    });\n\n    // Media select/clear handlers\n    $row.off('click.wcfMedia').on('click.wcfMedia', '.wcf-media-select', function(e){\n      e.preventDefault();\n      if (!(window.wp && wp.media)) return;\n      var type = $(this).data('media-type') || 'image';\n      var targetSel = $(this).data('target');\n      var $target = $row.find(targetSel);\n      if (!$target.length) return;\n\n      var frame = wp.media({\n        title: type === 'gallery' ? 'Select Images' : 'Select Image',\n        library: { type: 'image' },\n        multiple: type === 'gallery'\n      });\n\n      frame.on('select', function(){\n        if (type === 'gallery') {\n          var ids = frame.state().get('selection').map(function(att){ return att.id; });\n          $target.val(ids.join(',')).trigger('change');\n        } else {\n          var att = frame.state().get('selection').first();\n          if (att) {\n            var data = att.toJSON();\n            $target.val(data.url || '').trigger('change');\n          }\n        }\n      });\n\n      frame.open();\n    }).on('click.wcfMedia', '.wcf-media-clear', function(e){\n      e.preventDefault();\n      var targetSel = $(this).data('target');\n      var $target = $row.find(targetSel);\n      if ($target.length) {\n        $target.val('').trigger('change');\n      }\n    })\n    // Image (ID) uploader similar to core Field::control_image\n    .on('click.wcfMedia', '.wcf-field-image-upload', function(e){\n      e.preventDefault();\n      if (!(window.wp && wp.media)) return;\n      var targetId = $(this).data('target');\n      var $hidden = $row.find('#' + targetId);\n      var $preview = $row.find('#' + targetId + '_preview');\n      var frame = wp.media({ title: 'Select Image', library: { type: 'image' }, multiple: false });\n      frame.on('select', function(){\n        var att = frame.state().get('selection').first();\n        if (!att) return;\n        var data = att.toJSON();\n        $hidden.val(data.id || '').trigger('change');\n        if ($preview.length) {\n          var html = '';\n          if (data.url) {\n            html += '<span class=\"wcf-field-image-thumb\">';\n            html += '<img src=\"' + data.url + '\">';\n            html += '<a href=\"#\" class=\"wcf-field-remove-image\" title=\"Remove image\">×</a>';\n            html += '</span>';\n          }\n          $preview.html(html);\n        }\n      });\n      frame.open();\n    })\n    .on('click.wcfMedia', '.wcf-field-remove-image', function(e){\n      e.preventDefault();\n      var $thumb = $(this).closest('.wcf-field-image-thumb');\n      var $hidden = $thumb.closest('.wcf-repeater-row-body').find('input.wcf-media-id').first();\n      $thumb.remove();\n      if ($hidden.length) $hidden.val('').trigger('change');\n    })\n    // Gallery (IDs) uploader similar to core Field::control_gallery\n    .on('click.wcfMedia', '.wcf-field-gallery-upload', function(e){\n      e.preventDefault();\n      if (!(window.wp && wp.media)) return;\n      var targetId = $(this).data('target');\n      var $hidden = $row.find('#' + targetId + '.wcf-gallery-ids');\n      var $preview = $row.find('#' + targetId + '_preview');\n      var frame = wp.media({ title: 'Select Images', library: { type: 'image' }, multiple: true });\n      frame.on('select', function(){\n        var selection = frame.state().get('selection');\n        var ids = selection.map(function(att){ return att.id; });\n        $hidden.val(ids.join(',')).trigger('change');\n        if ($preview.length) {\n          var html = '';\n          selection.each(function(att){\n            var d = att.toJSON();\n            var url = (d.sizes && d.sizes.thumbnail && d.sizes.thumbnail.url) ? d.sizes.thumbnail.url : d.url;\n            html += '<span class=\"wcf-field-gallery-thumb\" data-id=\"' + d.id + '\">';\n            html += '<img src=\"' + url + '\" alt=\"\">';\n            html += '<a href=\"#\" class=\"wcf-field-remove-gallery-thumb\" title=\"Remove image\">×</a>';\n            html += '</span>';\n          });\n          $preview.html(html);\n        }\n      });\n      frame.open();\n    })\n    .on('click.wcfMedia', '.wcf-field-remove-gallery-thumb', function(e){\n      e.preventDefault();\n      var $thumb = $(this).closest('.wcf-field-gallery-thumb');\n      var id = String($thumb.data('id'));\n      var $wrapBody = $thumb.closest('.wcf-repeater-row-body');\n      var $hidden = $wrapBody.find('input.wcf-gallery-ids');\n      $thumb.remove();\n      if ($hidden.length) {\n        var current = ($hidden.val() || '').split(',').filter(Boolean);\n        var next = current.filter(function(v){ return String(v) !== id; });\n        $hidden.val(next.join(',')).trigger('change');\n      }\n    });\n  }\n\n  $(document).ready(function(){\n    $('.wcf-repeater').each(function(){\n      var $wrap = $(this);\n      var $form = $wrap.closest('form');\n      if ($form.length && !$form.data('wcfPopupBound')){\n        $form.on('submit.wcfPopup', function(){\n          // If any field has error, show a generic popup as well\n          if ($(this).find('.has-field-error, .wcf-field-error:visible').length){\n            try { alert('Please fix the highlighted fields.'); } catch(e){}\n          }\n          // Sync row error classes after validation marks fields\n          var $f = $(this);\n          setTimeout(function(){\n            $f.find('.wcf-repeater-row').each(function(){\n              var $r = $(this);\n              if ($r.find('.wcf-field.has-field-error, .wcf-field-error:visible').length){\n                $r.addClass('has-error');\n              } else {\n                $r.removeClass('has-error');\n              }\n            });\n          }, 0);\n        });\n        $form.data('wcfPopupBound', true);\n      }\n      var max   = parseInt($wrap.data('max'), 10) || 0;\n      var titleField = ($wrap.data('title-field') || '').toString();\n\n      // Make rows sortable\n      if ($.fn.sortable) {\n        $wrap.sortable({\n          items: '> .wcf-repeater-row:not(.wcf-repeater-template)',\n          handle: '.wcf-repeater-drag-handle',\n          axis: 'y',\n          placeholder: 'wcf-repeater-placeholder',\n          update: function(){ renumberRows($wrap); }\n        });\n      }\n\n      $wrap.find('.wcf-repeater-row:not(.wcf-repeater-template)').each(function(){\n        var $row = $(this);\n        bindRowEvents($wrap, $row, titleField);\n        // ensure collapsed initially via helper (sets icon too)\n        setOpen($row, false);\n      });\n\n      $wrap.on('click', '.wcf-repeater-add', function(e){\n        e.preventDefault();\n        var count = getRowCount($wrap);\n        if (max > 0 && count >= max) return;\n\n        var $tpl = $wrap.find('.wcf-repeater-template').first().clone(true, true);\n        $tpl.removeClass('wcf-repeater-template').show();\n\n        var idx = count;\n        replaceIndexAttrs($tpl, idx);\n\n        // reset values\n        $tpl.find('input[type=\"text\"], input[type=\"email\"], input[type=\"url\"], input[type=\"number\"], input[type=\"hidden\"], input[type=\"date\"]').val('');\n        $tpl.find('textarea').val('');\n        $tpl.find('select').each(function(){\n          var $s = $(this);\n          if ($s.prop('multiple')) $s.val([]);\n          else $s.val($s.find('option').first().val() || '');\n        });\n\n        // enable inputs on the cloned row (template had disabled)\n        $tpl.find('input, select, textarea').prop('disabled', false).removeAttr('disabled');\n\n        $wrap.find('.wcf-repeater-actions').before($tpl);\n\n        bindRowEvents($wrap, $tpl, titleField);\n        // ensure expanded\n        setOpen($tpl, true);\n\n        // Initialize WP editor for editor textareas if available\n        if (window.wp && wp.editor && typeof wp.editor.initialize === 'function') {\n          $tpl.find('textarea.wcf-field-editor').each(function(){\n            var id = $(this).attr('id');\n            if (id) {\n              try { wp.editor.initialize(id, { tinymce: true, quicktags: true }); } catch(e) {}\n            }\n          });\n        }\n      });\n    });\n  });\n\n  function initRowPlugins($row){\n    // Select2\n    if ($.fn.select2) {\n      $row.find('select.wcf-field-select2').each(function(){\n        var $s = $(this);\n        var width = $s.data('width') || '100%';\n        var placeholder = $s.data('placeholder') || '';\n        var allowClear = ($s.data('allow-clear') || '').toString() === 'true';\n        if ($s.data('select2')) { $s.select2('destroy'); }\n        $s.select2({ width: width, placeholder: placeholder, allowClear: allowClear });\n        $s.trigger('change');\n      });\n    }\n    // Color Picker\n    if ($.fn.wpColorPicker) {\n      $row.find('input.wcf-field-color').each(function(){\n        var $c = $(this);\n        if (!$c.hasClass('wp-color-picker')) {\n          try { $c.wpColorPicker(); } catch(e){}\n        }\n      });\n    }\n    // Datepicker\n    if ($.fn.datepicker) {\n      $row.find('input.wcf-field-date').each(function(){\n        var $d = $(this);\n        try { $d.datepicker(); } catch(e){}\n      });\n    }\n  }\n\n  function renumberRows($wrap){\n    $wrap.find('> .wcf-repeater-row:not(.wcf-repeater-template)').each(function(i){\n      var $row = $(this);\n      $row.attr('data-index', i);\n      // ids and controls\n      $row.find('[id]').each(function(){\n        var id = $(this).attr('id');\n        if (!id) return;\n        id = id.replace(/_(?:__INDEX__|\\d+)_/, '_' + i + '_');\n        $(this).attr('id', id);\n      });\n      $row.find('[aria-controls]').each(function(){\n        var ac = $(this).attr('aria-controls');\n        if (ac) $(this).attr('aria-controls', ac.replace(/_(?:__INDEX__|\\d+)_/, '_' + i + '_'));\n      });\n      $row.find('[for]').each(function(){\n        var fr = $(this).attr('for');\n        if (fr) $(this).attr('for', fr.replace(/_(?:__INDEX__|\\d+)_/, '_' + i + '_'));\n      });\n      // names\n      $row.find('[name]').each(function(){\n        var name = $(this).attr('name');\n        if (!name) return;\n        name = name.replace(/\\[[0-9]+\\]/, '[' + i + ']');\n        $(this).attr('name', name);\n      });\n    });\n  }\n})(jQuery);\n"],"names":["$","updateRowTitle","$row","titleField","val","find","first","toString","trim","text","setOpen","open","$btn","$body","attr","stop","slideDown","addClass","slideUp","removeClass","bindRowEvents","$wrap","on","e","preventDefault","expanded","this","remove","initRowPlugins","updateRowError","length","fn","select2","each","$s","width","data","placeholder","allowClear","trigger","wpColorPicker","$c","hasClass","datepicker","$d","setTimeout","off","type","$target","frame","window","wp","media","targetSel","title","library","multiple","ids","state","get","map","att","id","join","toJSON","url","$hidden","$preview","targetId","html","$thumb","closest","selection","d","sizes","thumbnail","String","next","split","filter","Boolean","v","document","ready","$form","max","alert","$f","$r","parseInt","sortable","items","handle","axis","update","i","replace","ac","fr","name","$tpl","idx","count","clone","show","$el","prop","removeAttr","before","editor","initialize","tinymce","quicktags","jQuery"],"mappings":"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"}