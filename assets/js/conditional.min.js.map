{"version":3,"file":"conditional.min.js","sources":["conditional.js"],"sourcesContent":["/**\n * Handle conditional field visibility based on other field values.\n *\n * @since 1.3.0\n */\n(function () {\n  /**\n   * Check and apply conditional logic for all conditional fields.\n   */\n  function WapicFieldConditionalFields() {\n    document.querySelectorAll(\"[data-condition-field], [data-cond-field]\").forEach(function (wrapper) {\n      checkCondition(wrapper);\n    });\n  }\n\n  /**\n   * Check condition for a single field wrapper.\n   *\n   * @param {HTMLElement} wrapper - The field wrapper element\n   */\n  function checkCondition(wrapper) {\n    const condField = wrapper.getAttribute(\"data-condition-field\") || wrapper.getAttribute(\"data-cond-field\");\n    const condValue = wrapper.getAttribute(\"data-condition-value\") || wrapper.getAttribute(\"data-cond-value\");\n    const operator = wrapper.getAttribute(\"data-condition-operator\") || \"==\";\n\n    if (!condField) return;\n\n    // Find trigger element by ID or name\n    let trigger = document.getElementById(condField);\n\n    if (!trigger) {\n      trigger = document.querySelector('[name=\"' + condField + '\"]');\n    }\n\n    if (!trigger) return;\n\n    let currentValue = \"\";\n    if (trigger.type === \"checkbox\") {\n      currentValue = trigger.checked ? trigger.value : \"\";\n    } else if (trigger.type === \"radio\") {\n      const radioName = trigger.name;\n      const checkedRadio = document.querySelector('input[name=\"' + radioName + '\"]:checked');\n      currentValue = checkedRadio ? checkedRadio.value : \"\";\n    } else {\n      currentValue = trigger.value;\n    }\n\n    let isMatch = false;\n    if (operator === \"==\") {\n      isMatch = String(currentValue) === String(condValue);\n    } else if (operator === \"!=\") {\n      isMatch = String(currentValue) !== String(condValue);\n    }\n\n    if (isMatch) {\n      wrapper.hidden = false;\n      // Restore original input types\n      wrapper.querySelectorAll(\"input[data-original-type]\").forEach(function (input) {\n        input.type = input.getAttribute(\"data-original-type\");\n        input.removeAttribute(\"data-original-type\");\n        const hiddenFlag = wrapper.querySelector('input[name=\"' + input.name + '_is_hidden\"]');\n        if (hiddenFlag) {\n          hiddenFlag.remove();\n        }\n      });\n    } else {\n      wrapper.hidden = true;\n      // Store original input type and change to hidden\n      wrapper.querySelectorAll('input:not([type=\"hidden\"])').forEach(function (input) {\n        if (!input.hasAttribute(\"data-original-type\")) {\n          input.setAttribute(\"data-original-type\", input.type);\n          input.type = \"hidden\";\n          const hiddenFlag = document.createElement(\"input\");\n          hiddenFlag.type = \"hidden\";\n          hiddenFlag.name = input.name + \"_is_hidden\";\n          hiddenFlag.value = \"1\";\n          wrapper.appendChild(hiddenFlag);\n        }\n      });\n    }\n  }\n\n  /**\n   * Initialize conditional fields functionality.\n   */\n  function WapicFieldConditionalFieldsInit() {\n    WapicFieldConditionalFields();\n\n    // Use event delegation for dynamic fields\n    document.addEventListener(\"change\", function (e) {\n      const target = e.target;\n      if (target.matches(\"input, select, textarea\")) {\n        WapicFieldConditionalFields();\n      }\n    });\n  }\n\n  document.addEventListener(\"DOMContentLoaded\", WapicFieldConditionalFieldsInit);\n})();\n"],"names":["WapicFieldConditionalFields","document","querySelectorAll","forEach","wrapper","checkCondition","condField","getAttribute","condValue","operator","let","trigger","getElementById","querySelector","currentValue","type","checked","value","radioName","name","checkedRadio","isMatch","String","hidden","input","removeAttribute","hiddenFlag","remove","hasAttribute","setAttribute","createElement","appendChild","addEventListener","e","target","matches"],"mappings":"CAKA,KAIE,SAASA,IACPC,SAASC,iBAAiB,2CAA2C,EAAEC,QAAQ,SAAUC,GACvFC,IASoBD,EATLA,EAUXE,EAAYF,EAAQG,aAAa,sBAAsB,GAAKH,EAAQG,aAAa,iBAAiB,EAClGC,EAAYJ,EAAQG,aAAa,sBAAsB,GAAKH,EAAQG,aAAa,iBAAiB,EAClGE,EAAWL,EAAQG,aAAa,yBAAyB,GAAK,KAEpE,GAAKD,EAAL,CAGAI,IAAIC,EAAUV,SAASW,eAAeN,CAAS,EAM/C,GAJKK,EAAAA,GACOV,SAASY,cAAc,UAAYP,EAAY,IAAI,EAG/D,CAEAI,IAAII,EAAe,GAEjBA,EADmB,aAAjBH,EAAQI,KACKJ,EAAQK,QAAUL,EAAQM,MAAQ,GACvB,UAAjBN,EAAQI,MACXG,EAAYP,EAAQQ,MACpBC,EAAenB,SAASY,cAAc,eAAiBK,EAAY,YAAY,GACvDE,EAAaH,MAAQ,IAEpCN,EAAQM,MAGzBP,IAAIW,EAAU,CAAA,EACG,OAAbZ,EACFY,EAAUC,OAAOR,CAAY,IAAMQ,OAAOd,CAAS,EAC7B,OAAbC,IACTY,EAAUC,OAAOR,CAAY,IAAMQ,OAAOd,CAAS,GAGjDa,GACFjB,EAAQmB,OAAS,CAAA,EAEjBnB,EAAQF,iBAAiB,2BAA2B,EAAEC,QAAQ,SAAUqB,GACtEA,EAAMT,KAAOS,EAAMjB,aAAa,oBAAoB,EACpDiB,EAAMC,gBAAgB,oBAAoB,EACpCC,EAAatB,EAAQS,cAAc,eAAiBW,EAAML,KAAO,cAAc,EACjFO,GACFA,EAAWC,OAAO,CAEtB,CAAC,IAEDvB,EAAQmB,OAAS,CAAA,EAEjBnB,EAAQF,iBAAiB,4BAA4B,EAAEC,QAAQ,SAAUqB,GACvE,IAGQE,EAHHF,EAAMI,aAAa,oBAAoB,IAC1CJ,EAAMK,aAAa,qBAAsBL,EAAMT,IAAI,EACnDS,EAAMT,KAAO,UACPW,EAAazB,SAAS6B,cAAc,OAAO,GACtCf,KAAO,SAClBW,EAAWP,KAAOK,EAAML,KAAO,aAC/BO,EAAWT,MAAQ,IACnBb,EAAQ2B,YAAYL,CAAU,EAElC,CAAC,EA5CiB,CATE,CAbtB,CAAC,CACH,CAoFAzB,SAAS+B,iBAAiB,mBAZ1B,WACEhC,EAA4B,EAG5BC,SAAS+B,iBAAiB,SAAU,SAAUC,GAC7BA,EAAEC,OACNC,QAAQ,yBAAyB,GAC1CnC,EAA4B,CAEhC,CAAC,CACH,CAE6E,CAC9E,GAAE"}