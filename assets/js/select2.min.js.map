{"version":3,"file":"select2.min.js","sources":["select2.js"],"sourcesContent":["(function () {\n  function WapicFieldSelect2Init() {\n    if (typeof jQuery === \"undefined\" || typeof jQuery.fn.select2 === \"undefined\") return;\n\n    jQuery(\".wcf-field-select2\").each(function () {\n      const $select = jQuery(this);\n\n      const $field = $select.closest(\".wcf-field\");\n      const $hidden = $field.find('input[type=\"hidden\"]');\n      const placeholder = $select.data(\"placeholder\") || \"Select an option\";\n      const allowClear = $select.data(\"allow-clear\") === true || $select.data(\"allow-clear\") === \"true\";\n      const width = $select.data(\"width\") || \"100%\";\n      const isMultiple = $select.attr(\"multiple\") === \"multiple\";\n\n      const options = {\n        placeholder: placeholder,\n        allowClear: allowClear,\n        width: \"style\",\n        dropdownParent: $field,\n      };\n\n      $select.css(\"width\", width);\n      $select.select2(options);\n\n      // Handle multiple select values\n      if (isMultiple) {\n        const originalName = $select.attr(\"name\");\n        if (originalName && !originalName.endsWith(\"[]\")) {\n          $select.attr(\"name\", originalName + \"[]\");\n        }\n\n        if ($hidden.length) {\n          const initialValue = $hidden.val();\n          if (initialValue) {\n            const values = initialValue\n              .split(\",\")\n              .map((v) => v.trim())\n              .filter(Boolean);\n            $select.val(values).trigger(\"change\");\n          }\n        }\n      }\n\n      // Update hidden field when selection changes\n      $select.on(\"change\", function () {\n        const values = $select.val() || [];\n        const valueString = Array.isArray(values) ? values.join(\",\") : values;\n        $hidden.val(valueString);\n      });\n    });\n\n    // Ensure form submission handles Select2 fields correctly\n    jQuery(document).on(\"submit\", \"form\", function () {\n      jQuery(\".wcf-field-select2[multiple]\").each(function () {\n        const $select = jQuery(this);\n        const $field = $select.closest(\".wcf-field\");\n        const $hidden = $field.find('input[type=\"hidden\"]');\n        const values = $select.val() || [];\n        $hidden.val(Array.isArray(values) ? values.join(\",\") : values);\n      });\n      return true;\n    });\n  }\n  document.addEventListener(\"DOMContentLoaded\", WapicFieldSelect2Init);\n})();\n"],"names":["document","addEventListener","jQuery","fn","select2","each","$select","this","$field","closest","$hidden","find","placeholder","data","allowClear","width","isMultiple","attr","options","dropdownParent","css","originalName","endsWith","length","initialValue","val","values","split","map","v","trim","filter","Boolean","trigger","on","valueString","Array","isArray","join"],"mappings":"AA+DEA,SAASC,iBAAiB,mBA9D1B,WACwB,aAAlB,OAAOC,QAAuD,KAAA,IAAtBA,OAAOC,GAAGC,UAEtDF,OAAO,oBAAoB,EAAEG,KAAK,WAChC,IAAMC,EAAUJ,OAAOK,IAAI,EAE3B,IAAMC,EAASF,EAAQG,QAAQ,YAAY,EAC3C,IAAMC,EAAUF,EAAOG,KAAK,sBAAsB,EAClD,IAAMC,EAAcN,EAAQO,KAAK,aAAa,GAAK,mBAC7CC,EAA6C,CAAA,IAAhCR,EAAQO,KAAK,aAAa,GAA8C,SAAhCP,EAAQO,KAAK,aAAa,EAC/EE,EAAQT,EAAQO,KAAK,OAAO,GAAK,OACjCG,EAA0C,aAA7BV,EAAQW,KAAK,UAAU,EAEpCC,EAAU,CACdN,YAAaA,EACbE,WAAYA,EACZC,MAAO,QACPI,eAAgBX,CAClB,EAEAF,EAAQc,IAAI,QAASL,CAAK,EAC1BT,EAAQF,QAAQc,CAAO,EAGnBF,KACIK,EAAef,EAAQW,KAAK,MAAM,IACpB,CAACI,EAAaC,SAAS,IAAI,GAC7ChB,EAAQW,KAAK,OAAQI,EAAe,IAAI,EAGtCX,EAAQa,UACJC,EAAed,EAAQe,IAAI,KAEzBC,EAASF,EACZG,MAAM,GAAG,EACTC,IAAI,GAAOC,EAAEC,KAAK,CAAC,EACnBC,OAAOC,OAAO,EACjB1B,EAAQmB,IAAIC,CAAM,EAAEO,QAAQ,QAAQ,GAM1C3B,EAAQ4B,GAAG,SAAU,WACnB,IAAMR,EAASpB,EAAQmB,IAAI,GAAK,GAC1BU,EAAcC,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,EAC/DhB,EAAQe,IAAIU,CAAW,CACzB,CAAC,CACH,CAAC,EAGDjC,OAAOF,QAAQ,EAAEkC,GAAG,SAAU,OAAQ,WAQpC,OAPAhC,OAAO,8BAA8B,EAAEG,KAAK,WAC1C,IAAMC,EAAUJ,OAAOK,IAAI,EAErBG,EADSJ,EAAQG,QAAQ,YAAY,EACpBE,KAAK,sBAAsB,EAC5Ce,EAASpB,EAAQmB,IAAI,GAAK,GAChCf,EAAQe,IAAIW,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,CAAM,CAC/D,CAAC,EACM,CAAA,CACT,CAAC,EACH,CACmE"}