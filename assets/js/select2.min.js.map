{"version":3,"file":"select2.min.js","sources":["select2.js"],"sourcesContent":["// Initialize Select2\n(function () {\n    function select2Init() {\n        if (typeof jQuery === 'undefined' || typeof jQuery.fn.select2 === 'undefined') return;\n\n        jQuery('.wcf-field .wcf-field-select2').each(function () {\n            const $select = jQuery(this);\n            const $field = $select.closest('.wcf-field');\n            const $hidden = $field.find('input[type=\"hidden\"]');\n            const placeholder = $select.data('placeholder') || 'Select an option';\n            const allowClear = $select.data('allow-clear') === true || $select.data('allow-clear') === 'true';\n            const width = $select.data('width') || '100%';\n            const isMultiple = $select.attr('multiple') === 'multiple';\n\n            // Basic configuration for Select2 4.0.13\n            const options = {\n                placeholder: placeholder,\n                allowClear: allowClear,\n                width: 'style', // Use style width instead of fixed width\n                dropdownParent: $select.closest('.wcf-field')\n            };\n\n            // Apply the width directly to the element\n            $select.css('width', width);\n\n            // Initialize Select2\n            $select.select2(options);\n\n            // Handle multiple select values\n            if (isMultiple) {\n                // Ensure the select has a name attribute for form submission\n                const originalName = $select.attr('name');\n                if (originalName && !originalName.endsWith('[]')) {\n                    $select.attr('name', originalName + '[]');\n                }\n\n                // Set initial value from hidden input\n                if ($hidden.length) {\n                    const initialValue = $hidden.val();\n                    if (initialValue) {\n                        const values = initialValue.split(',').map(v => v.trim()).filter(Boolean);\n                        $select.val(values).trigger('change');\n                    }\n                }\n            }\n\n            // Update hidden field when selection changes\n            $select.on('change', function () {\n                const values = $select.val() || [];\n                const valueString = Array.isArray(values) ? values.join(',') : values;\n                $hidden.val(valueString);\n            });\n        });\n\n        // Ensure form submission handles Select2 fields correctly\n        jQuery(document).on('submit', 'form', function () {\n            jQuery('.wcf-field-select2[multiple]').each(function () {\n                const $select = jQuery(this);\n                const $field = $select.closest('.wcf-field');\n                const $hidden = $field.find('input[type=\"hidden\"]');\n                const values = $select.val() || [];\n                $hidden.val(Array.isArray(values) ? values.join(',') : values);\n            });\n            return true;\n        });\n    }\n    document.addEventListener('DOMContentLoaded', select2Init);\n})();\n"],"names":["document","addEventListener","jQuery","fn","select2","each","$select","this","$hidden","closest","find","placeholder","data","allowClear","width","isMultiple","attr","options","dropdownParent","css","originalName","endsWith","length","initialValue","val","values","split","map","v","trim","filter","Boolean","trigger","on","valueString","Array","isArray","join"],"mappings":"AAkEIA,SAASC,iBAAiB,mBAhE1B,WAC0B,aAAlB,OAAOC,QAAuD,KAAA,IAAtBA,OAAOC,GAAGC,UAEtDF,OAAO,+BAA+B,EAAEG,KAAK,WACzC,IAAMC,EAAUJ,OAAOK,IAAI,EAE3B,IAAMC,EADSF,EAAQG,QAAQ,YAAY,EACpBC,KAAK,sBAAsB,EAClD,IAAMC,EAAcL,EAAQM,KAAK,aAAa,GAAK,mBAC7CC,EAA6C,CAAA,IAAhCP,EAAQM,KAAK,aAAa,GAA8C,SAAhCN,EAAQM,KAAK,aAAa,EAC/EE,EAAQR,EAAQM,KAAK,OAAO,GAAK,OACjCG,EAA0C,aAA7BT,EAAQU,KAAK,UAAU,EAGpCC,EAAU,CACZN,YAAaA,EACbE,WAAYA,EACZC,MAAO,QACPI,eAAgBZ,EAAQG,QAAQ,YAAY,CAChD,EAGAH,EAAQa,IAAI,QAASL,CAAK,EAG1BR,EAAQF,QAAQa,CAAO,EAGnBF,KAEMK,EAAed,EAAQU,KAAK,MAAM,IACpB,CAACI,EAAaC,SAAS,IAAI,GAC3Cf,EAAQU,KAAK,OAAQI,EAAe,IAAI,EAIxCZ,EAAQc,UACFC,EAAef,EAAQgB,IAAI,KAEvBC,EAASF,EAAaG,MAAM,GAAG,EAAEC,IAAIC,GAAKA,EAAEC,KAAK,CAAC,EAAEC,OAAOC,OAAO,EACxEzB,EAAQkB,IAAIC,CAAM,EAAEO,QAAQ,QAAQ,GAMhD1B,EAAQ2B,GAAG,SAAU,WACjB,IAAMR,EAASnB,EAAQkB,IAAI,GAAK,GAC1BU,EAAcC,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,EAC/DjB,EAAQgB,IAAIU,CAAW,CAC3B,CAAC,CACL,CAAC,EAGDhC,OAAOF,QAAQ,EAAEiC,GAAG,SAAU,OAAQ,WAQlC,OAPA/B,OAAO,8BAA8B,EAAEG,KAAK,WACxC,IAAMC,EAAUJ,OAAOK,IAAI,EAErBC,EADSF,EAAQG,QAAQ,YAAY,EACpBC,KAAK,sBAAsB,EAC5Ce,EAASnB,EAAQkB,IAAI,GAAK,GAChChB,EAAQgB,IAAIW,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,CAAM,CACjE,CAAC,EACM,CAAA,CACX,CAAC,EACL,CACyD"}