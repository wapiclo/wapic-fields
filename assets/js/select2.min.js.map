{"version":3,"file":"select2.min.js","sources":["select2.js"],"sourcesContent":["function wapicFieldSelect2Init() {\n  if (\n    typeof jQuery === \"undefined\" ||\n    typeof jQuery.fn.select2 === \"undefined\"\n  )\n    return;\n\n  jQuery(\".wcf-field-select2\").each(function () {\n    const $select = jQuery(this);\n\n    // Skip if inside repeater template\n    if ($select.closest(\".wcf-repeater-template\").length) return;\n\n    const $field = $select.closest(\".wcf-field\");\n    const $hidden = $field.find('input[type=\"hidden\"]');\n    const placeholder = $select.data(\"placeholder\") || \"Select an option\";\n    const allowClear =\n      $select.data(\"allow-clear\") === true ||\n      $select.data(\"allow-clear\") === \"true\";\n    const width = $select.data(\"width\") || \"100%\";\n    const isMultiple = $select.attr(\"multiple\") === \"multiple\";\n\n    const options = {\n      placeholder: placeholder,\n      allowClear: allowClear,\n      width: \"style\",\n      dropdownParent: $field,\n    };\n\n    $select.css(\"width\", width);\n    $select.select2(options);\n\n    // Handle multiple select values\n    if (isMultiple) {\n      const originalName = $select.attr(\"name\");\n      if (originalName && !originalName.endsWith(\"[]\")) {\n        $select.attr(\"name\", originalName + \"[]\");\n      }\n\n      if ($hidden.length) {\n        const initialValue = $hidden.val();\n        if (initialValue) {\n          const values = initialValue\n            .split(\",\")\n            .map((v) => v.trim())\n            .filter(Boolean);\n          $select.val(values).trigger(\"change\");\n        }\n      }\n    }\n\n    // Update hidden field when selection changes\n    $select.on(\"change\", function () {\n      const values = $select.val() || [];\n      const valueString = Array.isArray(values) ? values.join(\",\") : values;\n      $hidden.val(valueString);\n    });\n  });\n\n  // Ensure form submission handles Select2 fields correctly\n  jQuery(document).on(\"submit\", \"form\", function () {\n    jQuery(\".wcf-field-select2[multiple]\").each(function () {\n      const $select = jQuery(this);\n      const $field = $select.closest(\".wcf-field\");\n      const $hidden = $field.find('input[type=\"hidden\"]');\n      const values = $select.val() || [];\n      $hidden.val(Array.isArray(values) ? values.join(\",\") : values);\n    });\n    return true;\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", wapicFieldSelect2Init);\n"],"names":["wapicFieldSelect2Init","jQuery","fn","select2","each","$select","this","closest","length","$field","$hidden","find","placeholder","data","allowClear","width","isMultiple","attr","options","dropdownParent","css","originalName","endsWith","initialValue","val","values","split","map","v","trim","filter","Boolean","trigger","on","valueString","Array","isArray","join","document","addEventListener"],"mappings":"AAAA,SAASA,wBAEa,aAAlB,OAAOC,QACsB,KAAA,IAAtBA,OAAOC,GAAGC,UAInBF,OAAO,oBAAoB,EAAEG,KAAK,WAChC,IAAMC,EAAUJ,OAAOK,IAAI,EAG3B,GAAID,CAAAA,EAAQE,QAAQ,wBAAwB,EAAEC,OAA9C,CAEA,IAAMC,EAASJ,EAAQE,QAAQ,YAAY,EAC3C,IAAMG,EAAUD,EAAOE,KAAK,sBAAsB,EAClD,IAAMC,EAAcP,EAAQQ,KAAK,aAAa,GAAK,mBAC7CC,EAC4B,CAAA,IAAhCT,EAAQQ,KAAK,aAAa,GACM,SAAhCR,EAAQQ,KAAK,aAAa,EACtBE,EAAQV,EAAQQ,KAAK,OAAO,GAAK,OACjCG,EAA0C,aAA7BX,EAAQY,KAAK,UAAU,EAEpCC,EAAU,CACdN,YAAaA,EACbE,WAAYA,EACZC,MAAO,QACPI,eAAgBV,CAClB,EAEAJ,EAAQe,IAAI,QAASL,CAAK,EAC1BV,EAAQF,QAAQe,CAAO,EAGnBF,KACIK,EAAehB,EAAQY,KAAK,MAAM,IACpB,CAACI,EAAaC,SAAS,IAAI,GAC7CjB,EAAQY,KAAK,OAAQI,EAAe,IAAI,EAGtCX,EAAQF,UACJe,EAAeb,EAAQc,IAAI,KAEzBC,EAASF,EACZG,MAAM,GAAG,EACTC,IAAI,GAAOC,EAAEC,KAAK,CAAC,EACnBC,OAAOC,OAAO,EACjB1B,EAAQmB,IAAIC,CAAM,EAAEO,QAAQ,QAAQ,GAM1C3B,EAAQ4B,GAAG,SAAU,WACnB,IAAMR,EAASpB,EAAQmB,IAAI,GAAK,GAC1BU,EAAcC,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,EAC/Df,EAAQc,IAAIU,CAAW,CACzB,CAAC,CA7C2D,CA8C9D,CAAC,EAGDjC,OAAOqC,QAAQ,EAAEL,GAAG,SAAU,OAAQ,WAQpC,OAPAhC,OAAO,8BAA8B,EAAEG,KAAK,WAC1C,IAAMC,EAAUJ,OAAOK,IAAI,EAErBI,EADSL,EAAQE,QAAQ,YAAY,EACpBI,KAAK,sBAAsB,EAC5Cc,EAASpB,EAAQmB,IAAI,GAAK,GAChCd,EAAQc,IAAIW,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,CAAM,CAC/D,CAAC,EACM,CAAA,CACT,CAAC,EACH,CAEAa,SAASC,iBAAiB,mBAAoBvC,qBAAqB"}