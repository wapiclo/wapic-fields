{"version":3,"file":"select2.min.js","sources":["select2.js"],"sourcesContent":["  function wapicFieldSelect2Init() {\n    if (\n      typeof jQuery === \"undefined\" ||\n      typeof jQuery.fn.select2 === \"undefined\"\n    )\n      return;\n\n    jQuery(\".wcf-field .wcf-field-select2\").each(function () {\n      const $select = jQuery(this);\n\n      const $field = $select.closest(\".wcf-field\");\n\n      if ($field.hasClass(\"wcf-repeater-field\")) return;\n\n      const $hidden = $field.find('input[type=\"hidden\"]');\n      const placeholder = $select.data(\"placeholder\") || \"Select an option\";\n      const allowClear =\n        $select.data(\"allow-clear\") === true ||\n        $select.data(\"allow-clear\") === \"true\";\n      const width = $select.data(\"width\") || \"100%\";\n      const isMultiple = $select.attr(\"multiple\") === \"multiple\";\n\n      // Basic configuration for Select2 4.0.13\n      const options = {\n        placeholder: placeholder,\n        allowClear: allowClear,\n        width: \"style\", // Use style width instead of fixed width\n        dropdownParent: $select.closest(\".wcf-field\"),\n      };\n\n      // Apply the width directly to the element\n      $select.css(\"width\", width);\n\n      // Initialize Select2\n      $select.select2(options);\n\n      // Handle multiple select values\n      if (isMultiple) {\n        // Ensure the select has a name attribute for form submission\n        const originalName = $select.attr(\"name\");\n        if (originalName && !originalName.endsWith(\"[]\")) {\n          $select.attr(\"name\", originalName + \"[]\");\n        }\n\n        // Set initial value from hidden input\n        if ($hidden.length) {\n          const initialValue = $hidden.val();\n          if (initialValue) {\n            const values = initialValue\n              .split(\",\")\n              .map((v) => v.trim())\n              .filter(Boolean);\n            $select.val(values).trigger(\"change\");\n          }\n        }\n      }\n\n      // Update hidden field when selection changes\n      $select.on(\"change\", function () {\n        const values = $select.val() || [];\n        const valueString = Array.isArray(values) ? values.join(\",\") : values;\n        $hidden.val(valueString);\n      });\n    });\n\n    // Ensure form submission handles Select2 fields correctly\n    jQuery(document).on(\"submit\", \"form\", function () {\n      jQuery(\".wcf-field-select2[multiple]\").each(function () {\n        const $select = jQuery(this);\n        const $field = $select.closest(\".wcf-field\");\n        const $hidden = $field.find('input[type=\"hidden\"]');\n        const values = $select.val() || [];\n        $hidden.val(Array.isArray(values) ? values.join(\",\") : values);\n      });\n      return true;\n    });\n  }\n  document.addEventListener(\"DOMContentLoaded\", wapicFieldSelect2Init);"],"names":["wapicFieldSelect2Init","jQuery","fn","select2","each","$select","this","$field","closest","hasClass","$hidden","find","placeholder","data","allowClear","width","isMultiple","attr","options","dropdownParent","css","originalName","endsWith","length","initialValue","val","values","split","map","v","trim","filter","Boolean","trigger","on","valueString","Array","isArray","join","document","addEventListener"],"mappings":"AAAE,SAASA,wBAEa,aAAlB,OAAOC,QACsB,KAAA,IAAtBA,OAAOC,GAAGC,UAInBF,OAAO,+BAA+B,EAAEG,KAAK,WAC3C,IAAMC,EAAUJ,OAAOK,IAAI,EAE3B,IAAMC,EAASF,EAAQG,QAAQ,YAAY,EAE3C,GAAID,CAAAA,EAAOE,SAAS,oBAAoB,EAAxC,CAEA,IAAMC,EAAUH,EAAOI,KAAK,sBAAsB,EAClD,IAAMC,EAAcP,EAAQQ,KAAK,aAAa,GAAK,mBAC7CC,EAC4B,CAAA,IAAhCT,EAAQQ,KAAK,aAAa,GACM,SAAhCR,EAAQQ,KAAK,aAAa,EACtBE,EAAQV,EAAQQ,KAAK,OAAO,GAAK,OACjCG,EAA0C,aAA7BX,EAAQY,KAAK,UAAU,EAGpCC,EAAU,CACdN,YAAaA,EACbE,WAAYA,EACZC,MAAO,QACPI,eAAgBd,EAAQG,QAAQ,YAAY,CAC9C,EAGAH,EAAQe,IAAI,QAASL,CAAK,EAG1BV,EAAQF,QAAQe,CAAO,EAGnBF,KAEIK,EAAehB,EAAQY,KAAK,MAAM,IACpB,CAACI,EAAaC,SAAS,IAAI,GAC7CjB,EAAQY,KAAK,OAAQI,EAAe,IAAI,EAItCX,EAAQa,UACJC,EAAed,EAAQe,IAAI,KAEzBC,EAASF,EACZG,MAAM,GAAG,EACTC,IAAI,GAAOC,EAAEC,KAAK,CAAC,EACnBC,OAAOC,OAAO,EACjB3B,EAAQoB,IAAIC,CAAM,EAAEO,QAAQ,QAAQ,GAM1C5B,EAAQ6B,GAAG,SAAU,WACnB,IAAMR,EAASrB,EAAQoB,IAAI,GAAK,GAC1BU,EAAcC,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,EAC/DhB,EAAQe,IAAIU,CAAW,CACzB,CAAC,CAlDgD,CAmDnD,CAAC,EAGDlC,OAAOsC,QAAQ,EAAEL,GAAG,SAAU,OAAQ,WAQpC,OAPAjC,OAAO,8BAA8B,EAAEG,KAAK,WAC1C,IAAMC,EAAUJ,OAAOK,IAAI,EAErBI,EADSL,EAAQG,QAAQ,YAAY,EACpBG,KAAK,sBAAsB,EAC5Ce,EAASrB,EAAQoB,IAAI,GAAK,GAChCf,EAAQe,IAAIW,MAAMC,QAAQX,CAAM,EAAIA,EAAOY,KAAK,GAAG,EAAIZ,CAAM,CAC/D,CAAC,EACM,CAAA,CACT,CAAC,EACH,CACAa,SAASC,iBAAiB,mBAAoBxC,qBAAqB"}